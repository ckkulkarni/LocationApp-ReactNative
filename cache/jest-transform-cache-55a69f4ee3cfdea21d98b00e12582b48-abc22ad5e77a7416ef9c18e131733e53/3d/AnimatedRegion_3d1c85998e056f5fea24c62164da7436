4bd514fd520fd49de11ba9a11caf3f61
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
Object.defineProperty(exports, "__esModule", {
  value: true
});
var react_native_1 = require("react-native");
var AnimatedWithChildren = Object.getPrototypeOf(react_native_1.Animated.ValueXY);
if (__DEV__) {
  if (AnimatedWithChildren.name !== 'AnimatedWithChildren') {
    console.error('AnimatedRegion could not obtain AnimatedWithChildren base class');
  }
}
var configTypes = ['latitude', 'longitude', 'latitudeDelta', 'longitudeDelta'];
var defaultValues = {
  latitude: 0,
  longitude: 0,
  latitudeDelta: 0,
  longitudeDelta: 0
};
var _uniqueId = 1;
var getAnimatedValue = function getAnimatedValue(valueIn, fallback) {
  if (valueIn instanceof react_native_1.Animated.Value) {
    return valueIn;
  } else if (typeof valueIn === 'number') {
    return new react_native_1.Animated.Value(valueIn);
  }
  return new react_native_1.Animated.Value(fallback);
};
var AnimatedMapRegion = function (_AnimatedWithChildren) {
  (0, _inherits2.default)(AnimatedMapRegion, _AnimatedWithChildren);
  var _super = _createSuper(AnimatedMapRegion);
  function AnimatedMapRegion() {
    var _this;
    var valueIn = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    (0, _classCallCheck2.default)(this, AnimatedMapRegion);
    _this = _super.call(this);
    _this.latitude = getAnimatedValue(valueIn.latitude, defaultValues.latitude);
    _this.longitude = getAnimatedValue(valueIn.longitude, defaultValues.longitude);
    _this.latitudeDelta = getAnimatedValue(valueIn.latitudeDelta, defaultValues.latitudeDelta);
    _this.longitudeDelta = getAnimatedValue(valueIn.longitudeDelta, defaultValues.longitudeDelta);
    _this._regionListeners = {};
    return _this;
  }
  (0, _createClass2.default)(AnimatedMapRegion, [{
    key: "setValue",
    value: function setValue(value) {
      this.latitude._value = value.latitude;
      this.longitude._value = value.longitude;
      this.latitudeDelta._value = value.latitudeDelta;
      this.longitudeDelta._value = value.longitudeDelta;
    }
  }, {
    key: "setOffset",
    value: function setOffset(offset) {
      this.latitude.setOffset(offset.latitude);
      this.longitude.setOffset(offset.longitude);
      this.latitudeDelta.setOffset(offset.latitudeDelta);
      this.longitudeDelta.setOffset(offset.longitudeDelta);
    }
  }, {
    key: "flattenOffset",
    value: function flattenOffset() {
      this.latitude.flattenOffset();
      this.longitude.flattenOffset();
      this.latitudeDelta.flattenOffset();
      this.longitudeDelta.flattenOffset();
    }
  }, {
    key: "__getValue",
    value: function __getValue() {
      return {
        latitude: this.latitude.__getValue(),
        longitude: this.longitude.__getValue(),
        latitudeDelta: this.latitudeDelta.__getValue(),
        longitudeDelta: this.longitudeDelta.__getValue()
      };
    }
  }, {
    key: "__attach",
    value: function __attach() {
      this.latitude.__addChild(this);
      this.longitude.__addChild(this);
      this.latitudeDelta.__addChild(this);
      this.longitudeDelta.__addChild(this);
    }
  }, {
    key: "__detach",
    value: function __detach() {
      this.latitude.__removeChild(this);
      this.longitude.__removeChild(this);
      this.latitudeDelta.__removeChild(this);
      this.longitudeDelta.__removeChild(this);
    }
  }, {
    key: "stopAnimation",
    value: function stopAnimation(callback) {
      this.latitude.stopAnimation();
      this.longitude.stopAnimation();
      this.latitudeDelta.stopAnimation();
      this.longitudeDelta.stopAnimation();
      callback && callback(this.__getValue());
    }
  }, {
    key: "addListener",
    value: function addListener(callback) {
      var _this2 = this;
      var id = String(_uniqueId++);
      var jointCallback = function jointCallback() {
        return callback(_this2.__getValue());
      };
      this._regionListeners[id] = {
        latitude: this.latitude.addListener(jointCallback),
        longitude: this.longitude.addListener(jointCallback),
        latitudeDelta: this.latitudeDelta.addListener(jointCallback),
        longitudeDelta: this.longitudeDelta.addListener(jointCallback)
      };
      return id;
    }
  }, {
    key: "removeListener",
    value: function removeListener(id) {
      this.latitude.removeListener(this._regionListeners[id].latitude);
      this.longitude.removeListener(this._regionListeners[id].longitude);
      this.latitudeDelta.removeListener(this._regionListeners[id].latitudeDelta);
      this.longitudeDelta.removeListener(this._regionListeners[id].longitudeDelta);
      delete this._regionListeners[id];
    }
  }, {
    key: "spring",
    value: function spring(config) {
      var animations = [];
      for (var type of configTypes) {
        if (config.hasOwnProperty(type)) {
          animations.push(react_native_1.Animated.spring(this[type], Object.assign({}, config, {
            toValue: config[type],
            useNativeDriver: !!(config != null && config.useNativeDriver)
          })));
        }
      }
      return react_native_1.Animated.parallel(animations);
    }
  }, {
    key: "timing",
    value: function timing(config) {
      var animations = [];
      for (var type of configTypes) {
        if (config.hasOwnProperty(type)) {
          animations.push(react_native_1.Animated.timing(this[type], Object.assign({}, config, {
            toValue: config[type],
            useNativeDriver: !!(config != null && config.useNativeDriver)
          })));
        }
      }
      return react_native_1.Animated.parallel(animations);
    }
  }]);
  return AnimatedMapRegion;
}(AnimatedWithChildren);
exports.default = AnimatedMapRegion;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9jbGFzc0NhbGxDaGVjazIiLCJfY3JlYXRlQ2xhc3MyIiwiX2luaGVyaXRzMiIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuMiIsIl9nZXRQcm90b3R5cGVPZjIiLCJfY3JlYXRlU3VwZXIiLCJEZXJpdmVkIiwiaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCIsIl9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QiLCJfY3JlYXRlU3VwZXJJbnRlcm5hbCIsIlN1cGVyIiwiZGVmYXVsdCIsInJlc3VsdCIsIk5ld1RhcmdldCIsImNvbnN0cnVjdG9yIiwiUmVmbGVjdCIsImNvbnN0cnVjdCIsImFyZ3VtZW50cyIsImFwcGx5Iiwic2hhbSIsIlByb3h5IiwiQm9vbGVhbiIsInByb3RvdHlwZSIsInZhbHVlT2YiLCJjYWxsIiwiZSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZXhwb3J0cyIsInZhbHVlIiwicmVhY3RfbmF0aXZlXzEiLCJBbmltYXRlZFdpdGhDaGlsZHJlbiIsImdldFByb3RvdHlwZU9mIiwiQW5pbWF0ZWQiLCJWYWx1ZVhZIiwiX19ERVZfXyIsIm5hbWUiLCJjb25zb2xlIiwiZXJyb3IiLCJjb25maWdUeXBlcyIsImRlZmF1bHRWYWx1ZXMiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsImxhdGl0dWRlRGVsdGEiLCJsb25naXR1ZGVEZWx0YSIsIl91bmlxdWVJZCIsImdldEFuaW1hdGVkVmFsdWUiLCJ2YWx1ZUluIiwiZmFsbGJhY2siLCJWYWx1ZSIsIkFuaW1hdGVkTWFwUmVnaW9uIiwiX0FuaW1hdGVkV2l0aENoaWxkcmVuIiwiX3N1cGVyIiwiX3RoaXMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJfcmVnaW9uTGlzdGVuZXJzIiwia2V5Iiwic2V0VmFsdWUiLCJfdmFsdWUiLCJzZXRPZmZzZXQiLCJvZmZzZXQiLCJmbGF0dGVuT2Zmc2V0IiwiX19nZXRWYWx1ZSIsIl9fYXR0YWNoIiwiX19hZGRDaGlsZCIsIl9fZGV0YWNoIiwiX19yZW1vdmVDaGlsZCIsInN0b3BBbmltYXRpb24iLCJjYWxsYmFjayIsImFkZExpc3RlbmVyIiwiX3RoaXMyIiwiaWQiLCJTdHJpbmciLCJqb2ludENhbGxiYWNrIiwicmVtb3ZlTGlzdGVuZXIiLCJzcHJpbmciLCJjb25maWciLCJhbmltYXRpb25zIiwidHlwZSIsImhhc093blByb3BlcnR5IiwicHVzaCIsImFzc2lnbiIsInRvVmFsdWUiLCJ1c2VOYXRpdmVEcml2ZXIiLCJwYXJhbGxlbCIsInRpbWluZyJdLCJzb3VyY2VzIjpbIkFuaW1hdGVkUmVnaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuY29uc3QgcmVhY3RfbmF0aXZlXzEgPSByZXF1aXJlKFwicmVhY3QtbmF0aXZlXCIpO1xuY29uc3QgQW5pbWF0ZWRXaXRoQ2hpbGRyZW4gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YocmVhY3RfbmF0aXZlXzEuQW5pbWF0ZWQuVmFsdWVYWSk7XG5pZiAoX19ERVZfXykge1xuICAgIGlmIChBbmltYXRlZFdpdGhDaGlsZHJlbi5uYW1lICE9PSAnQW5pbWF0ZWRXaXRoQ2hpbGRyZW4nKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FuaW1hdGVkUmVnaW9uIGNvdWxkIG5vdCBvYnRhaW4gQW5pbWF0ZWRXaXRoQ2hpbGRyZW4gYmFzZSBjbGFzcycpO1xuICAgIH1cbn1cbmNvbnN0IGNvbmZpZ1R5cGVzID0gW1xuICAgICdsYXRpdHVkZScsXG4gICAgJ2xvbmdpdHVkZScsXG4gICAgJ2xhdGl0dWRlRGVsdGEnLFxuICAgICdsb25naXR1ZGVEZWx0YScsXG5dO1xuY29uc3QgZGVmYXVsdFZhbHVlcyA9IHtcbiAgICAvLyBwcm9iYWJseSB3YW50IHRvIGNvbWUgdXAgd2l0aCBiZXR0ZXIgZGVmYXVsdHNcbiAgICBsYXRpdHVkZTogMCxcbiAgICBsb25naXR1ZGU6IDAsXG4gICAgbGF0aXR1ZGVEZWx0YTogMCxcbiAgICBsb25naXR1ZGVEZWx0YTogMCxcbn07XG5sZXQgX3VuaXF1ZUlkID0gMTtcbmNvbnN0IGdldEFuaW1hdGVkVmFsdWUgPSAodmFsdWVJbiwgZmFsbGJhY2spID0+IHtcbiAgICBpZiAodmFsdWVJbiBpbnN0YW5jZW9mIHJlYWN0X25hdGl2ZV8xLkFuaW1hdGVkLlZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZUluO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsdWVJbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIG5ldyByZWFjdF9uYXRpdmVfMS5BbmltYXRlZC5WYWx1ZSh2YWx1ZUluKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyByZWFjdF9uYXRpdmVfMS5BbmltYXRlZC5WYWx1ZShmYWxsYmFjayk7XG59O1xuY2xhc3MgQW5pbWF0ZWRNYXBSZWdpb24gZXh0ZW5kcyBBbmltYXRlZFdpdGhDaGlsZHJlbiB7XG4gICAgY29uc3RydWN0b3IodmFsdWVJbiA9IHt9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMubGF0aXR1ZGUgPSBnZXRBbmltYXRlZFZhbHVlKHZhbHVlSW4ubGF0aXR1ZGUsIGRlZmF1bHRWYWx1ZXMubGF0aXR1ZGUpO1xuICAgICAgICB0aGlzLmxvbmdpdHVkZSA9IGdldEFuaW1hdGVkVmFsdWUodmFsdWVJbi5sb25naXR1ZGUsIGRlZmF1bHRWYWx1ZXMubG9uZ2l0dWRlKTtcbiAgICAgICAgdGhpcy5sYXRpdHVkZURlbHRhID0gZ2V0QW5pbWF0ZWRWYWx1ZSh2YWx1ZUluLmxhdGl0dWRlRGVsdGEsIGRlZmF1bHRWYWx1ZXMubGF0aXR1ZGVEZWx0YSk7XG4gICAgICAgIHRoaXMubG9uZ2l0dWRlRGVsdGEgPSBnZXRBbmltYXRlZFZhbHVlKHZhbHVlSW4ubG9uZ2l0dWRlRGVsdGEsIGRlZmF1bHRWYWx1ZXMubG9uZ2l0dWRlRGVsdGEpO1xuICAgICAgICB0aGlzLl9yZWdpb25MaXN0ZW5lcnMgPSB7fTtcbiAgICB9XG4gICAgc2V0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5sYXRpdHVkZS5fdmFsdWUgPSB2YWx1ZS5sYXRpdHVkZTtcbiAgICAgICAgdGhpcy5sb25naXR1ZGUuX3ZhbHVlID0gdmFsdWUubG9uZ2l0dWRlO1xuICAgICAgICB0aGlzLmxhdGl0dWRlRGVsdGEuX3ZhbHVlID0gdmFsdWUubGF0aXR1ZGVEZWx0YTtcbiAgICAgICAgdGhpcy5sb25naXR1ZGVEZWx0YS5fdmFsdWUgPSB2YWx1ZS5sb25naXR1ZGVEZWx0YTtcbiAgICB9XG4gICAgc2V0T2Zmc2V0KG9mZnNldCkge1xuICAgICAgICB0aGlzLmxhdGl0dWRlLnNldE9mZnNldChvZmZzZXQubGF0aXR1ZGUpO1xuICAgICAgICB0aGlzLmxvbmdpdHVkZS5zZXRPZmZzZXQob2Zmc2V0LmxvbmdpdHVkZSk7XG4gICAgICAgIHRoaXMubGF0aXR1ZGVEZWx0YS5zZXRPZmZzZXQob2Zmc2V0LmxhdGl0dWRlRGVsdGEpO1xuICAgICAgICB0aGlzLmxvbmdpdHVkZURlbHRhLnNldE9mZnNldChvZmZzZXQubG9uZ2l0dWRlRGVsdGEpO1xuICAgIH1cbiAgICBmbGF0dGVuT2Zmc2V0KCkge1xuICAgICAgICB0aGlzLmxhdGl0dWRlLmZsYXR0ZW5PZmZzZXQoKTtcbiAgICAgICAgdGhpcy5sb25naXR1ZGUuZmxhdHRlbk9mZnNldCgpO1xuICAgICAgICB0aGlzLmxhdGl0dWRlRGVsdGEuZmxhdHRlbk9mZnNldCgpO1xuICAgICAgICB0aGlzLmxvbmdpdHVkZURlbHRhLmZsYXR0ZW5PZmZzZXQoKTtcbiAgICB9XG4gICAgX19nZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiB0aGlzLmxhdGl0dWRlLl9fZ2V0VmFsdWUoKSxcbiAgICAgICAgICAgIGxvbmdpdHVkZTogdGhpcy5sb25naXR1ZGUuX19nZXRWYWx1ZSgpLFxuICAgICAgICAgICAgbGF0aXR1ZGVEZWx0YTogdGhpcy5sYXRpdHVkZURlbHRhLl9fZ2V0VmFsdWUoKSxcbiAgICAgICAgICAgIGxvbmdpdHVkZURlbHRhOiB0aGlzLmxvbmdpdHVkZURlbHRhLl9fZ2V0VmFsdWUoKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgX19hdHRhY2goKSB7XG4gICAgICAgIHRoaXMubGF0aXR1ZGUuX19hZGRDaGlsZCh0aGlzKTtcbiAgICAgICAgdGhpcy5sb25naXR1ZGUuX19hZGRDaGlsZCh0aGlzKTtcbiAgICAgICAgdGhpcy5sYXRpdHVkZURlbHRhLl9fYWRkQ2hpbGQodGhpcyk7XG4gICAgICAgIHRoaXMubG9uZ2l0dWRlRGVsdGEuX19hZGRDaGlsZCh0aGlzKTtcbiAgICB9XG4gICAgX19kZXRhY2goKSB7XG4gICAgICAgIHRoaXMubGF0aXR1ZGUuX19yZW1vdmVDaGlsZCh0aGlzKTtcbiAgICAgICAgdGhpcy5sb25naXR1ZGUuX19yZW1vdmVDaGlsZCh0aGlzKTtcbiAgICAgICAgdGhpcy5sYXRpdHVkZURlbHRhLl9fcmVtb3ZlQ2hpbGQodGhpcyk7XG4gICAgICAgIHRoaXMubG9uZ2l0dWRlRGVsdGEuX19yZW1vdmVDaGlsZCh0aGlzKTtcbiAgICB9XG4gICAgc3RvcEFuaW1hdGlvbihjYWxsYmFjaykge1xuICAgICAgICB0aGlzLmxhdGl0dWRlLnN0b3BBbmltYXRpb24oKTtcbiAgICAgICAgdGhpcy5sb25naXR1ZGUuc3RvcEFuaW1hdGlvbigpO1xuICAgICAgICB0aGlzLmxhdGl0dWRlRGVsdGEuc3RvcEFuaW1hdGlvbigpO1xuICAgICAgICB0aGlzLmxvbmdpdHVkZURlbHRhLnN0b3BBbmltYXRpb24oKTtcbiAgICAgICAgY2FsbGJhY2sgJiYgY2FsbGJhY2sodGhpcy5fX2dldFZhbHVlKCkpO1xuICAgIH1cbiAgICBhZGRMaXN0ZW5lcihjYWxsYmFjaykge1xuICAgICAgICBjb25zdCBpZCA9IFN0cmluZyhfdW5pcXVlSWQrKyk7XG4gICAgICAgIGNvbnN0IGpvaW50Q2FsbGJhY2sgPSAoKSA9PiAvKnt2YWx1ZX0qLyBjYWxsYmFjayh0aGlzLl9fZ2V0VmFsdWUoKSk7XG4gICAgICAgIHRoaXMuX3JlZ2lvbkxpc3RlbmVyc1tpZF0gPSB7XG4gICAgICAgICAgICBsYXRpdHVkZTogdGhpcy5sYXRpdHVkZS5hZGRMaXN0ZW5lcihqb2ludENhbGxiYWNrKSxcbiAgICAgICAgICAgIGxvbmdpdHVkZTogdGhpcy5sb25naXR1ZGUuYWRkTGlzdGVuZXIoam9pbnRDYWxsYmFjayksXG4gICAgICAgICAgICBsYXRpdHVkZURlbHRhOiB0aGlzLmxhdGl0dWRlRGVsdGEuYWRkTGlzdGVuZXIoam9pbnRDYWxsYmFjayksXG4gICAgICAgICAgICBsb25naXR1ZGVEZWx0YTogdGhpcy5sb25naXR1ZGVEZWx0YS5hZGRMaXN0ZW5lcihqb2ludENhbGxiYWNrKSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGlkO1xuICAgIH1cbiAgICByZW1vdmVMaXN0ZW5lcihpZCkge1xuICAgICAgICB0aGlzLmxhdGl0dWRlLnJlbW92ZUxpc3RlbmVyKHRoaXMuX3JlZ2lvbkxpc3RlbmVyc1tpZF0ubGF0aXR1ZGUpO1xuICAgICAgICB0aGlzLmxvbmdpdHVkZS5yZW1vdmVMaXN0ZW5lcih0aGlzLl9yZWdpb25MaXN0ZW5lcnNbaWRdLmxvbmdpdHVkZSk7XG4gICAgICAgIHRoaXMubGF0aXR1ZGVEZWx0YS5yZW1vdmVMaXN0ZW5lcih0aGlzLl9yZWdpb25MaXN0ZW5lcnNbaWRdLmxhdGl0dWRlRGVsdGEpO1xuICAgICAgICB0aGlzLmxvbmdpdHVkZURlbHRhLnJlbW92ZUxpc3RlbmVyKHRoaXMuX3JlZ2lvbkxpc3RlbmVyc1tpZF0ubG9uZ2l0dWRlRGVsdGEpO1xuICAgICAgICBkZWxldGUgdGhpcy5fcmVnaW9uTGlzdGVuZXJzW2lkXTtcbiAgICB9XG4gICAgc3ByaW5nKGNvbmZpZykge1xuICAgICAgICBjb25zdCBhbmltYXRpb25zID0gW107XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBjb25maWdUeXBlcykge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbnMucHVzaChyZWFjdF9uYXRpdmVfMS5BbmltYXRlZC5zcHJpbmcodGhpc1t0eXBlXSwge1xuICAgICAgICAgICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICAgICAgICAgIHRvVmFsdWU6IGNvbmZpZ1t0eXBlXSxcbiAgICAgICAgICAgICAgICAgICAgLy8gbWF5IGhlbHAgdG8gZWxpbWluYXRlIHNvbWUgZGV2IHdhcm5pbmdzIGFuZCBwZXJmIGlzc3Vlc1xuICAgICAgICAgICAgICAgICAgICB1c2VOYXRpdmVEcml2ZXI6ICEhY29uZmlnPy51c2VOYXRpdmVEcml2ZXIsXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWFjdF9uYXRpdmVfMS5BbmltYXRlZC5wYXJhbGxlbChhbmltYXRpb25zKTtcbiAgICB9XG4gICAgdGltaW5nKGNvbmZpZykge1xuICAgICAgICBjb25zdCBhbmltYXRpb25zID0gW107XG4gICAgICAgIGZvciAoY29uc3QgdHlwZSBvZiBjb25maWdUeXBlcykge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkge1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbnMucHVzaChyZWFjdF9uYXRpdmVfMS5BbmltYXRlZC50aW1pbmcodGhpc1t0eXBlXSwge1xuICAgICAgICAgICAgICAgICAgICAuLi5jb25maWcsXG4gICAgICAgICAgICAgICAgICAgIHRvVmFsdWU6IGNvbmZpZ1t0eXBlXSxcbiAgICAgICAgICAgICAgICAgICAgLy8gbWF5IGhlbHAgdG8gZWxpbWluYXRlIHNvbWUgZGV2IHdhcm5pbmdzIGFuZCBwZXJmIGlzc3Vlc1xuICAgICAgICAgICAgICAgICAgICB1c2VOYXRpdmVEcml2ZXI6ICEhY29uZmlnPy51c2VOYXRpdmVEcml2ZXIsXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWFjdF9uYXRpdmVfMS5BbmltYXRlZC5wYXJhbGxlbChhbmltYXRpb25zKTtcbiAgICB9XG59XG5leHBvcnRzLmRlZmF1bHQgPSBBbmltYXRlZE1hcFJlZ2lvbjtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFBQyxJQUFBQSxzQkFBQSxHQUFBQyxPQUFBO0FBQUEsSUFBQUMsZ0JBQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFFLGFBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFHLFVBQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUFBLElBQUFJLDJCQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFBQSxJQUFBSyxnQkFBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBQUEsU0FBQU0sYUFBQUMsT0FBQSxRQUFBQyx5QkFBQSxHQUFBQyx5QkFBQSxvQkFBQUMscUJBQUEsUUFBQUMsS0FBQSxPQUFBTixnQkFBQSxDQUFBTyxPQUFBLEVBQUFMLE9BQUEsR0FBQU0sTUFBQSxNQUFBTCx5QkFBQSxRQUFBTSxTQUFBLE9BQUFULGdCQUFBLENBQUFPLE9BQUEsUUFBQUcsV0FBQSxFQUFBRixNQUFBLEdBQUFHLE9BQUEsQ0FBQUMsU0FBQSxDQUFBTixLQUFBLEVBQUFPLFNBQUEsRUFBQUosU0FBQSxZQUFBRCxNQUFBLEdBQUFGLEtBQUEsQ0FBQVEsS0FBQSxPQUFBRCxTQUFBLGdCQUFBZCwyQkFBQSxDQUFBUSxPQUFBLFFBQUFDLE1BQUE7QUFBQSxTQUFBSiwwQkFBQSxlQUFBTyxPQUFBLHFCQUFBQSxPQUFBLENBQUFDLFNBQUEsb0JBQUFELE9BQUEsQ0FBQUMsU0FBQSxDQUFBRyxJQUFBLDJCQUFBQyxLQUFBLG9DQUFBQyxPQUFBLENBQUFDLFNBQUEsQ0FBQUMsT0FBQSxDQUFBQyxJQUFB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